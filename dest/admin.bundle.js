(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{147:function(e,t){e.exports={filterByType:function(e,t){var s=t.map(function(e){return Number(e)});return Object.keys(e).filter(function(t){return s.includes(e[t].type)}).map(function(t){return e[t]})},sortByType:function(e,t){return e.sort(function(e,s){return(Number(e.type)-Number(s.type))*(t?1:-1)})},sortByName:function(e,t){var s=this;return e.sort(function(e,r){return(s.compareString(e.name,r.name)?1:-1)*(t?1:-1)})},sortByUID:function(e,t){var s=this;return e.sort(function(e,r){return(s.compareString(e.uid,r.uid)?1:-1)*(t?1:-1)})},sortByCreatedAt:function(e,t){var s=this;return e.sort(function(e,r){return(s.compareString(e.created_at,r.created_at)?1:-1)*(t?1:-1)})},compareString:function(e,t){return(e||"")>=(t||"")},sortLogs:function(e,t,s){var r=this;return e.sort(function(e,a){return(r.compareString(s(e),s(a))?1:-1)*(t?1:-1)})},reduceLogs:function(e,t){if(0==t.length)return e.map(function(e){return e.count=1,e});var s=e.reduce(function(e,s){var r=t.map(function(e){return s[e]}).join("-");return e[r=""===r?"null":r]||(e[r]=s,e[r].count=0),e[r].count++,e},{});return Object.keys(s).map(function(e){return s[e]})}}},327:function(e,t,s){"use strict";s.r(t);var r=s(7),a=s(84);r.default.use(a.a);var o=new a.a.Store({state:{verbLogs:[],userLogs:[],users:{}},mutations:{userLogs:function(e,t){e.userLogs=Object.keys(t).map(function(e){var s=t[e];return s.id=e,s})},verbLogs:function(e,t){e.verbLogs=Object.keys(t).map(function(e){var s=t[e];return s.id=e,s})},users:function(e,t){e.users=t},deleteUserLogById:function(e,t){e.userLogs=e.userLogs.filter(function(e){return e.id!==t})}},actions:{initUsers:function(e){try{firebase.database().ref("users").on("value",function(t){t.exists()&&e.commit("users",t.val())})}catch(e){console.log("failed to fetch users data.")}},initUserLogs:function(e){try{firebase.database().ref("logs/users").on("value",function(t){t.exists()&&e.commit("userLogs",t.val())})}catch(e){console.log("failed to fetch users log data.")}},initVerbLogs:function(e){try{firebase.database().ref("logs/verbs").on("value",function(t){t.exists()&&e.commit("verbLogs",t.val())})}catch(e){console.log("failed to fetch verbs log data.")}}}}),c=s(147),l=s.n(c),i=s(40),n=s.n(i),u={data:function(){return{dispTypes:[0,10,20],sortBy:"created_at",orderAsc:!1,keywordSearchTarget:"type",searchKeyword:"",searchFrom:"",searchTo:"",summaryTargets:[],summaryTargetBase:["type","uid"],recordPerPage:20,currentPage:1,selectedIndexes:[],selectedAll:!1}},methods:{nextPage:function(){this.currentPage<this.totalPage&&this.currentPage++},previousPage:function(){this.currentPage>1&&this.currentPage--},onAllSelectChecked:function(){this.selectedAll?this.unselectAll():this.selectAll()},selectAll:function(){var e=!0,t=!1,s=void 0;try{for(var r,a=this.pageSummaryList[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;this.selectedIndexes.includes(o.id)||this.selectedIndexes.push(o.id)}}catch(e){t=!0,s=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw s}}},unselectAll:function(){this.selectedIndexes=[]},deleteSelectedRecord:function(){n.a.deleteUserLogsByIds(this.selectedIndexes),this.selectedAll=!1}},computed:{users:function(){return o.state.users},summaryList:function(){var e=this,t=this,s=l.a.filterByType(o.state.userLogs,this.dispTypes);return""!==this.searchKeyword&&(s=s.filter(function(t){return(""+t[e.keywordSearchTarget]).startsWith(e.searchKeyword)})),""!==this.searchFrom&&(s=s.filter(function(t){return t.created_at>=e.searchFrom})),""!==this.searchTo&&(s=s.filter(function(t){return t.created_at<=e.searchTo})),s=(s=l.a.reduceLogs(s,this.summaryTargets)).map(function(e){return e.name=null==t.users[e.uid]?"":t.users[e.uid].name,e}),s=l.a.sortLogs(s,this.orderAsc,function(t){return t[e.sortBy]})},pageSummaryList:function(){return this.summaryList.slice((this.currentPage-1)*this.recordPerPage,this.currentPage*this.recordPerPage)},totalPage:function(){return Math.floor(this.summaryList.length/this.recordPerPage)+1}},watch:{recordPerPage:function(e){this.currentPage=1}},mounted:function(){o.dispatch("initUserLogs")}},d=s(23),m={data:function(){return{summaryTargets:[],keywordSearchTarget:"uid",searchKeyword:"",searchFrom:"",searchTo:"",sortBy:"created_at",orderAsc:!1,recordPerPage:20,currentPage:1,selectedIndexes:[],selectedAll:!1}},methods:{nextPage:function(){this.currentPage<this.totalPage&&this.currentPage++},previousPage:function(){this.currentPage>1&&this.currentPage--},onAllSelectChecked:function(){this.selectedAll?this.unselectAll():this.selectAll()},selectAll:function(){var e=!0,t=!1,s=void 0;try{for(var r,a=this.pageSummaryList[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;this.selectedIndexes.includes(o.id)||this.selectedIndexes.push(o.id)}}catch(e){t=!0,s=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw s}}},unselectAll:function(){this.selectedIndexes=[]},deleteSelectedRecord:function(){n.a.deleteVerbLogsByIds(this.selectedIndexes),this.selectedAll=!1}},computed:{users:function(){return o.state.users},verbLogs:function(){return o.state.verbLogs},summaryList:function(){var e=this,t=this.verbLogs;return""!==this.searchKeyword&&(t=t.filter(function(t){return(""+t[e.keywordSearchTarget]).startsWith(e.searchKeyword)})),""!==this.searchFrom&&(t=t.filter(function(t){return t.created_at>=e.searchFrom})),""!==this.searchTo&&(t=t.filter(function(t){return t.created_at<=e.searchTo})),t=l.a.reduceLogs(t,this.summaryTargets),t=l.a.sortLogs(t,this.orderAsc,function(t){return t[e.sortBy]})},pageSummaryList:function(){return this.summaryList.slice((this.currentPage-1)*this.recordPerPage,this.currentPage*this.recordPerPage)},totalPage:function(){return Math.floor(this.summaryList.length/this.recordPerPage)+1}},watch:{recordPerPage:function(e){this.currentPage=1}},mounted:function(){o.dispatch("initVerbLogs")}},v={components:{UserLogs:Object(d.a)(u,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"my-3",attrs:{id:"filter_area"}},[s("div",{staticClass:"rounded bg-light px-2 py-4"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-4 col-lg-5 col-md-6"},[s("label",{staticClass:"text-info",attrs:{for:"user-log-key-word"}},[e._v("keyword")]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-4 pr-1"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.keywordSearchTarget,expression:"keywordSearchTarget"}],staticClass:"custom-select mr-sm-2",attrs:{id:"order-selection"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.keywordSearchTarget=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"type",selected:""}},[e._v("type")]),e._v(" "),s("option",{attrs:{value:"uid"}},[e._v("uid")]),e._v(" "),s("option",{attrs:{value:"name"}},[e._v("name")]),e._v(" "),s("option",{attrs:{value:"count"}},[e._v("count")])])]),e._v(" "),s("div",{staticClass:"col-8 pl-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"form-control",attrs:{id:"user-log-key-word",type:"text",autocomplete:"off",placeholder:"keyword"},domProps:{value:e.searchKeyword},on:{input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"col-xl-4 col-lg-5 col-md-6"},[s("label",{staticClass:"text-info",attrs:{for:"type-selection"}},[e._v("type")]),e._v(" "),s("div",{staticClass:"row",attrs:{id:"type-selection"}},[s("div",{staticClass:"col custom-control custom-checkbox ml-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.dispTypes,expression:"dispTypes"}],staticClass:"custom-control-input",attrs:{id:"select-access",type:"checkbox",value:"0"},domProps:{checked:Array.isArray(e.dispTypes)?e._i(e.dispTypes,"0")>-1:e.dispTypes},on:{change:function(t){var s=e.dispTypes,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,"0");r.checked?o<0&&(e.dispTypes=s.concat(["0"])):o>-1&&(e.dispTypes=s.slice(0,o).concat(s.slice(o+1)))}else e.dispTypes=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"select-access"}},[e._v("access")])]),e._v(" "),s("div",{staticClass:"col custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.dispTypes,expression:"dispTypes"}],staticClass:"custom-control-input",attrs:{id:"select-login",type:"checkbox",value:"10"},domProps:{checked:Array.isArray(e.dispTypes)?e._i(e.dispTypes,"10")>-1:e.dispTypes},on:{change:function(t){var s=e.dispTypes,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,"10");r.checked?o<0&&(e.dispTypes=s.concat(["10"])):o>-1&&(e.dispTypes=s.slice(0,o).concat(s.slice(o+1)))}else e.dispTypes=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"select-login"}},[e._v("login")])]),e._v(" "),s("div",{staticClass:"col custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.dispTypes,expression:"dispTypes"}],staticClass:"custom-control-input",attrs:{id:"select-logout",type:"checkbox",value:"20"},domProps:{checked:Array.isArray(e.dispTypes)?e._i(e.dispTypes,"20")>-1:e.dispTypes},on:{change:function(t){var s=e.dispTypes,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,"20");r.checked?o<0&&(e.dispTypes=s.concat(["20"])):o>-1&&(e.dispTypes=s.slice(0,o).concat(s.slice(o+1)))}else e.dispTypes=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"select-logout"}},[e._v("logout")])])])]),e._v(" "),s("div",{staticClass:"col-xl-3 col-lg-5"},[s("label",{staticClass:"mr-sm-2 text-info",attrs:{for:"order-selection"}},[e._v("order")]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],staticClass:"custom-select mr-sm-2",attrs:{id:"order-selection"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.sortBy=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"type",selected:""}},[e._v("type")]),e._v(" "),s("option",{attrs:{value:"uid"}},[e._v("uid")]),e._v(" "),s("option",{attrs:{value:"name"}},[e._v("name")]),e._v(" "),s("option",{attrs:{value:"created_at"}},[e._v("created at")])])]),e._v(" "),s("div",{staticClass:"col-4  custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.orderAsc,expression:"orderAsc"}],staticClass:"custom-control-input",attrs:{id:"order-direction",type:"checkbox"},domProps:{checked:Array.isArray(e.orderAsc)?e._i(e.orderAsc,null)>-1:e.orderAsc},on:{change:function(t){var s=e.orderAsc,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,null);r.checked?o<0&&(e.orderAsc=s.concat([null])):o>-1&&(e.orderAsc=s.slice(0,o).concat(s.slice(o+1)))}else e.orderAsc=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"order-direction"}},[e._v("asc")])])])]),e._v(" "),s("div",{staticClass:"col-xl-4 col-lg-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"text-info",attrs:{for:"search-from"}},[e._v("from")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchFrom,expression:"searchFrom"}],staticClass:"form-control",attrs:{id:"search-from",type:"text",autocomplete:"off",placeholder:"yyyy-mm-dd hh:ii:ss"},domProps:{value:e.searchFrom},on:{input:function(t){t.target.composing||(e.searchFrom=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"col"},[s("label",{staticClass:"text-info",attrs:{for:"search-to"}},[e._v("to")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTo,expression:"searchTo"}],staticClass:"form-control",attrs:{id:"search-to",type:"text",autocomplete:"off",placeholder:"yyyy-mm-dd hh:ii:ss"},domProps:{value:e.searchTo},on:{input:function(t){t.target.composing||(e.searchTo=t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"col-xl-4 col-lg-5"},[s("label",{staticClass:"text-info",attrs:{for:"type-selection"}},[e._v("summary target")]),e._v(" "),s("div",{staticClass:"row",attrs:{id:"type-selection"}},[s("div",{staticClass:"col custom-control custom-checkbox ml-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.summaryTargets,expression:"summaryTargets"}],staticClass:"custom-control-input",attrs:{id:"summary-target-type",type:"checkbox",value:"type"},domProps:{checked:Array.isArray(e.summaryTargets)?e._i(e.summaryTargets,"type")>-1:e.summaryTargets},on:{change:function(t){var s=e.summaryTargets,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,"type");r.checked?o<0&&(e.summaryTargets=s.concat(["type"])):o>-1&&(e.summaryTargets=s.slice(0,o).concat(s.slice(o+1)))}else e.summaryTargets=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"summary-target-type"}},[e._v("type")])]),e._v(" "),s("div",{staticClass:"col custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.summaryTargets,expression:"summaryTargets"}],staticClass:"custom-control-input",attrs:{id:"summary-target-uid",type:"checkbox",value:"uid"},domProps:{checked:Array.isArray(e.summaryTargets)?e._i(e.summaryTargets,"uid")>-1:e.summaryTargets},on:{change:function(t){var s=e.summaryTargets,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,"uid");r.checked?o<0&&(e.summaryTargets=s.concat(["uid"])):o>-1&&(e.summaryTargets=s.slice(0,o).concat(s.slice(o+1)))}else e.summaryTargets=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"summary-target-uid"}},[e._v("uid")])])])]),e._v(" "),s("div",{staticClass:"col-xl-2 col-lg-3"},[s("label",{staticClass:"text-info",attrs:{for:"record-per-page"}},[e._v("record per page")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.recordPerPage,expression:"recordPerPage"}],staticClass:"custom-select mr-sm-2",attrs:{id:"record-per-page"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.recordPerPage=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"20",selected:""}},[e._v("20")]),e._v(" "),s("option",{attrs:{value:"50"}},[e._v("50")]),e._v(" "),s("option",{attrs:{value:"100"}},[e._v("100")])])])])])]),e._v(" "),s("div",{staticClass:"mx-4"},[s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-3 offset-xl-1 pl-1"},[s("input",{staticClass:"btn btn-danger",class:{disabled:0==e.selectedIndexes.length},attrs:{type:"button",value:"delete"},on:{click:function(t){return e.deleteSelectedRecord()}}})]),e._v(" "),s("div",{staticClass:"col"},[s("nav",{staticClass:"mx-4",class:{"d-none":1==e.totalPage,"d-block":e.totalPage>1},attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination mb-0"},[s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(t){return e.previousPage()}}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("«")]),e._v(" "),s("span",{staticClass:"sr-only"},[e._v("Previous")])])]),e._v(" "),e._l(e.totalPage,function(t){return s("li",{staticClass:"page-item",on:{click:function(s){e.currentPage=t}}},[s("a",{staticClass:"page-link",class:{"bg-info text-white":t==e.currentPage},attrs:{href:"#/admin"}},[e._v(e._s(t))])])}),e._v(" "),s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(t){return e.nextPage()}}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("»")]),e._v(" "),s("span",{staticClass:"sr-only"},[e._v("Next")])])])],2)])])]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"pb-2 border-bottom col-xl-1 offset-xl-1 col-lg-2"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-4 custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedAll,expression:"selectedAll"}],staticClass:"custom-control-input",attrs:{id:"select-all-record",type:"checkbox"},domProps:{value:!0,checked:Array.isArray(e.selectedAll)?e._i(e.selectedAll,!0)>-1:e.selectedAll},on:{click:function(t){return e.onAllSelectChecked()},change:function(t){var s=e.selectedAll,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,!0);r.checked?o<0&&(e.selectedAll=s.concat([!0])):o>-1&&(e.selectedAll=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedAll=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"select-all-record"}})]),e._v(" "),e._m(0)])]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4)]),e._v(" "),e._l(e.pageSummaryList,function(t,r){return s("div",{key:r,staticClass:"row"},[s("div",{staticClass:"border-bottom py-2 col-xl-1 offset-xl-1 col-lg-2"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-4 custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedIndexes,expression:"selectedIndexes"}],staticClass:"custom-control-input",attrs:{id:"select-record-"+r,type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.selectedIndexes)?e._i(e.selectedIndexes,t.id)>-1:e.selectedIndexes},on:{change:function(s){var r=e.selectedIndexes,a=s.target,o=!!a.checked;if(Array.isArray(r)){var c=t.id,l=e._i(r,c);a.checked?l<0&&(e.selectedIndexes=r.concat([c])):l>-1&&(e.selectedIndexes=r.slice(0,l).concat(r.slice(l+1)))}else e.selectedIndexes=o}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"select-record-"+r}})]),e._v(" "),s("div",{staticClass:"col-8"},[s("span",[e._v(e._s(t.type))])])])]),e._v(" "),s("div",{staticClass:"border-bottom py-2 col-xl-3 col-lg-4"},[s("span",[e._v(e._s(t.uid))])]),e._v(" "),s("div",{staticClass:"border-bottom py-2 col-xl-2 col-lg-3"},[s("span",[e._v(e._s(t.name))])]),e._v(" "),s("div",{staticClass:"border-bottom py-2 col-xl-2 col-lg-2"},[s("span",[e._v(e._s(1==t.count?t.created_at:""))])]),e._v(" "),s("div",{staticClass:"border-bottom py-2 col-xl-1 col-lg-1"},[s("span",[e._v(e._s(e.summaryTargets.length>0?t.count:""))])])])})],2)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-8"},[t("span",[this._v("type")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pb-2 border-bottom col-xl-3 col-lg-4"},[t("span",[this._v("uid")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pb-2 border-bottom col-xl-2 col-lg-3"},[t("span",[this._v("name")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pb-2 border-bottom col-xl-2 col-lg-2"},[t("span",[this._v("created at")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pb-2 border-bottom col-xl-1 col-lg-1"},[t("span",[this._v("count")])])}],!1,null,null,null).exports,VerbLogs:Object(d.a)(m,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"my-3",attrs:{id:"filter_area"}},[s("div",{staticClass:"rounded bg-light px-2 py-4"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-4 col-lg-5 col-md-6"},[s("label",{staticClass:"text-info",attrs:{for:"user-log-key-word"}},[e._v("keyword")]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-4 pr-1"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.keywordSearchTarget,expression:"keywordSearchTarget"}],staticClass:"custom-select mr-sm-2",attrs:{id:"order-selection"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.keywordSearchTarget=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"uid"}},[e._v("uid")]),e._v(" "),s("option",{attrs:{value:"word_id"}},[e._v("word id")]),e._v(" "),s("option",{attrs:{value:"type",selected:""}},[e._v("type")]),e._v(" "),s("option",{attrs:{value:"person"}},[e._v("person")]),e._v(" "),s("option",{attrs:{value:"word"}},[e._v("word")])])]),e._v(" "),s("div",{staticClass:"col-8 pl-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],staticClass:"form-control",attrs:{id:"user-log-key-word",type:"text",autocomplete:"off",placeholder:"keyword"},domProps:{value:e.searchKeyword},on:{input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"col-xl-3 col-lg-5"},[s("label",{staticClass:"mr-sm-2 text-info",attrs:{for:"verb-order-selection"}},[e._v("order")]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],staticClass:"custom-select mr-sm-2",attrs:{id:"verb-order-selection"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.sortBy=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"uid",selected:""}},[e._v("uid")]),e._v(" "),s("option",{attrs:{value:"word_id"}},[e._v("word id")]),e._v(" "),s("option",{attrs:{value:"type"}},[e._v("type")]),e._v(" "),s("option",{attrs:{value:"person"}},[e._v("person")]),e._v(" "),s("option",{attrs:{value:"word"}},[e._v("word")]),e._v(" "),s("option",{attrs:{value:"created_at"}},[e._v("created at")]),e._v(" "),s("option",{attrs:{value:"count"}},[e._v("count")])])]),e._v(" "),s("div",{staticClass:"col-4  custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.orderAsc,expression:"orderAsc"}],staticClass:"custom-control-input",attrs:{id:"verb-order-direction",type:"checkbox"},domProps:{checked:Array.isArray(e.orderAsc)?e._i(e.orderAsc,null)>-1:e.orderAsc},on:{change:function(t){var s=e.orderAsc,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,null);r.checked?o<0&&(e.orderAsc=s.concat([null])):o>-1&&(e.orderAsc=s.slice(0,o).concat(s.slice(o+1)))}else e.orderAsc=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"verb-order-direction"}},[e._v("asc")])])])]),e._v(" "),s("div",{staticClass:"col-xl-4 col-lg-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("label",{staticClass:"text-info",attrs:{for:"verb-search-from"}},[e._v("from")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchFrom,expression:"searchFrom"}],staticClass:"form-control",attrs:{id:"verb-search-from",type:"text",autocomplete:"off",placeholder:"yyyy-mm-dd hh:ii:ss"},domProps:{value:e.searchFrom},on:{input:function(t){t.target.composing||(e.searchFrom=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"col"},[s("label",{staticClass:"text-info",attrs:{for:"verb-search-to"}},[e._v("to")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTo,expression:"searchTo"}],staticClass:"form-control",attrs:{id:"verb-search-to",type:"text",autocomplete:"off",placeholder:"yyyy-mm-dd hh:ii:ss"},domProps:{value:e.searchTo},on:{input:function(t){t.target.composing||(e.searchTo=t.target.value)}}})])])]),e._v(" "),s("div",{staticClass:"col-xl-4 col-lg-5"},[s("label",{staticClass:"text-info",attrs:{for:"type-selection"}},[e._v("summary target")]),e._v(" "),s("div",{staticClass:"row",attrs:{id:"type-selection"}},[s("div",{staticClass:"col custom-control custom-checkbox ml-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.summaryTargets,expression:"summaryTargets"}],staticClass:"custom-control-input",attrs:{id:"verb-summary-target-uid",type:"checkbox",value:"uid"},domProps:{checked:Array.isArray(e.summaryTargets)?e._i(e.summaryTargets,"uid")>-1:e.summaryTargets},on:{change:function(t){var s=e.summaryTargets,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,"uid");r.checked?o<0&&(e.summaryTargets=s.concat(["uid"])):o>-1&&(e.summaryTargets=s.slice(0,o).concat(s.slice(o+1)))}else e.summaryTargets=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"verb-summary-target-uid"}},[e._v("uid")])]),e._v(" "),s("div",{staticClass:"col custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.summaryTargets,expression:"summaryTargets"}],staticClass:"custom-control-input",attrs:{id:"summary-target-word-id",type:"checkbox",value:"word_id"},domProps:{checked:Array.isArray(e.summaryTargets)?e._i(e.summaryTargets,"word_id")>-1:e.summaryTargets},on:{change:function(t){var s=e.summaryTargets,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,"word_id");r.checked?o<0&&(e.summaryTargets=s.concat(["word_id"])):o>-1&&(e.summaryTargets=s.slice(0,o).concat(s.slice(o+1)))}else e.summaryTargets=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"summary-target-word-id"}},[e._v("word id")])]),e._v(" "),s("div",{staticClass:"col custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.summaryTargets,expression:"summaryTargets"}],staticClass:"custom-control-input",attrs:{id:"verb-summary-target-type",type:"checkbox",value:"type"},domProps:{checked:Array.isArray(e.summaryTargets)?e._i(e.summaryTargets,"type")>-1:e.summaryTargets},on:{change:function(t){var s=e.summaryTargets,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,"type");r.checked?o<0&&(e.summaryTargets=s.concat(["type"])):o>-1&&(e.summaryTargets=s.slice(0,o).concat(s.slice(o+1)))}else e.summaryTargets=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"verb-summary-target-type"}},[e._v("type")])]),e._v(" "),s("div",{staticClass:"col custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.summaryTargets,expression:"summaryTargets"}],staticClass:"custom-control-input",attrs:{id:"summary-target-person",type:"checkbox",value:"person"},domProps:{checked:Array.isArray(e.summaryTargets)?e._i(e.summaryTargets,"person")>-1:e.summaryTargets},on:{change:function(t){var s=e.summaryTargets,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,"person");r.checked?o<0&&(e.summaryTargets=s.concat(["person"])):o>-1&&(e.summaryTargets=s.slice(0,o).concat(s.slice(o+1)))}else e.summaryTargets=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"summary-target-person"}},[e._v("person")])])])]),e._v(" "),s("div",{staticClass:"col-xl-2 col-lg-3"},[s("label",{staticClass:"text-info",attrs:{for:"verb-record-per-page"}},[e._v("record per page")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.recordPerPage,expression:"recordPerPage"}],staticClass:"custom-select mr-sm-2",attrs:{id:"verb-record-per-page"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.recordPerPage=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"20",selected:""}},[e._v("20")]),e._v(" "),s("option",{attrs:{value:"50"}},[e._v("50")]),e._v(" "),s("option",{attrs:{value:"100"}},[e._v("100")])])])])])]),e._v(" "),s("div",{staticClass:"mx-4"},[s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-3 pl-1"},[s("input",{staticClass:"btn btn-danger",class:{disabled:0==e.selectedIndexes.length},attrs:{type:"button",value:"delete"},on:{click:function(t){return e.deleteSelectedRecord()}}})]),e._v(" "),s("div",{staticClass:"col  offset-xl-1"},[s("nav",{staticClass:"mx-4",class:{"d-none":1==e.totalPage,"d-block":e.totalPage>1},attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination mb-0"},[s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(t){return e.previousPage()}}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("«")]),e._v(" "),s("span",{staticClass:"sr-only"},[e._v("Previous")])])]),e._v(" "),e._l(e.totalPage,function(t){return s("li",{staticClass:"page-item",on:{click:function(s){e.currentPage=t}}},[s("a",{staticClass:"page-link",class:{"bg-info text-white":t==e.currentPage},attrs:{href:"#/admin"}},[e._v(e._s(t))])])}),e._v(" "),s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(t){return e.nextPage()}}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("»")]),e._v(" "),s("span",{staticClass:"sr-only"},[e._v("Next")])])])],2)])])]),e._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"border-bottom py-2 col-xl-3 col-lg-4"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-1 col-lg-2 custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedAll,expression:"selectedAll"}],staticClass:"custom-control-input",attrs:{id:"select-all-verb-record",type:"checkbox"},domProps:{value:!0,checked:Array.isArray(e.selectedAll)?e._i(e.selectedAll,!0)>-1:e.selectedAll},on:{click:function(t){return e.onAllSelectChecked()},change:function(t){var s=e.selectedAll,r=t.target,a=!!r.checked;if(Array.isArray(s)){var o=e._i(s,!0);r.checked?o<0&&(e.selectedAll=s.concat([!0])):o>-1&&(e.selectedAll=s.slice(0,o).concat(s.slice(o+1)))}else e.selectedAll=a}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"select-all-verb-record"}})]),e._v(" "),e._m(0)])]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6)]),e._v(" "),e._l(e.pageSummaryList,function(t,r){return s("div",{key:r,staticClass:"row"},[s("div",{staticClass:"border-bottom py-2 col-xl-3 col-lg-4"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-1 col-lg-2 custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedIndexes,expression:"selectedIndexes"}],staticClass:"custom-control-input",attrs:{id:"select-verb-record-"+r,type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.selectedIndexes)?e._i(e.selectedIndexes,t.id)>-1:e.selectedIndexes},on:{change:function(s){var r=e.selectedIndexes,a=s.target,o=!!a.checked;if(Array.isArray(r)){var c=t.id,l=e._i(r,c);a.checked?l<0&&(e.selectedIndexes=r.concat([c])):l>-1&&(e.selectedIndexes=r.slice(0,l).concat(r.slice(l+1)))}else e.selectedIndexes=o}}}),e._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"select-verb-record-"+r}})]),e._v(" "),s("div",{staticClass:"col"},[s("span",[e._v(e._s(t.uid))])])])]),e._v(" "),s("div",{staticClass:"border-bottom py-2 col-xl-1 col-lg-1"},[s("span",[e._v(e._s(t.word_id))])]),e._v(" "),s("div",{staticClass:"border-bottom py-2 col-xl-1 col-lg-1"},[s("span",[e._v(e._s(t.type))])]),e._v(" "),s("div",{staticClass:"border-bottom py-2 col-xl-1 col-lg-1"},[s("span",[e._v(e._s(t.person))])]),e._v(" "),s("div",{staticClass:"border-bottom py-2 col-xl-2 col-lg-2"},[s("span",[e._v(e._s(t.word))])]),e._v(" "),s("div",{staticClass:"border-bottom py-2 col-xl-2 col-lg-2"},[s("span",[e._v(e._s(1==t.count?t.created_at:""))])]),e._v(" "),s("div",{staticClass:"border-bottom py-2 col-xl-1 col-lg-1"},[s("span",[e._v(e._s(e.summaryTargets.length>0?t.count:""))])])])})],2)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-8"},[t("span",[this._v("uid")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pb-2 border-bottom col-xl-1 col-lg-1"},[t("span",[this._v("id")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pb-2 border-bottom col-xl-1 col-lg-1"},[t("span",[this._v("type")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pb-2 border-bottom col-xl-1 col-lg-1"},[t("span",[this._v("person")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pb-2 border-bottom col-xl-2 col-lg-2"},[t("span",[this._v("word")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pb-2 border-bottom col-xl-2 col-lg-2"},[t("span",[this._v("created at")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pb-2 border-bottom col-xl-1 col-lg-1"},[t("span",[this._v("count")])])}],!1,null,null,null).exports},data:function(){return{currentTabComponent:"UserLogs"}},computed:{userLogs:function(){return o.state.userLogs}},mounted:function(){o.dispatch("initUsers")}},p=Object(d.a)(v,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{"d-none":0==e.userLogs.length}},[s("ul",{staticClass:"nav nav-tabs mt-3"},[s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",class:{active:"UserLogs"==e.currentTabComponent},attrs:{href:"#/admin"},on:{click:function(t){e.currentTabComponent="UserLogs"}}},[e._v("User Logs")])]),e._v(" "),s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",class:{active:"VerbLogs"==e.currentTabComponent},attrs:{href:"#/admin"},on:{click:function(t){e.currentTabComponent="VerbLogs"}}},[e._v("Verb Logs")])])]),e._v(" "),s("keep-alive",[s(e.currentTabComponent,{tag:"component"})],1)],1)},[],!1,null,null,null);t.default=p.exports},40:function(e,t,s){var r=s(54);e.exports={insertUserInfo:function(e){if(firebase)if(e){var t=r.getFormatCurrentDate();firebase.database().ref("users/"+e.uid).set({name:e.displayName,count:0,email:e.email,created_at:t,last_login_at:t})}else console.log("[insertUserInfo] user not exists.")},insertUserCount:function(e,t){firebase&&(firebase.database().ref("users/"+e+"/count").set(t.count),firebase.database().ref("users/"+e+"/last_login_at").set(t.last_login_at))},incrementUserCount:function(e){if(firebase&&e){var t=this;firebase.database().ref("users/"+e.uid).once("value").then(function(s){if(!s.exists())return t.insertUserInfo(e),void t.incrementUserCount(e);var a=s.val();a.count=a.count+1,a.last_login_at=r.getFormatCurrentDate(),t.insertUserCount(e.uid,a)})}},logSearchVerb:function(e,t){firebase.database().ref("logs/verbs").push({uid:e?e.uid:"no user",word_id:t.word_id,type:t.type,person:t.person,created_at:r.getFormatCurrentDate(),deleted:0,word:t.word})},logUserLogin:function(e){firebase.database().ref("logs/users").push({uid:e?e.uid:"no user",type:10,created_at:r.getFormatCurrentDate(),deleted:0})},logUserLogout:function(e){firebase.database().ref("logs/users").push({uid:e?e.uid:"no user",type:20,created_at:r.getFormatCurrentDate(),deleted:0})},logAccess:function(){firebase.database().ref("logs/users").push({uid:null,type:0,created_at:r.getFormatCurrentDate(),deleted:0})},deleteUserLogsByIds:function(e){this.deleteLogsByIds("logs/users",e)},deleteVerbLogsByIds:function(e){this.deleteLogsByIds("logs/verbs",e)},deleteLogsByIds:function(e,t){var s={},r=!0,a=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var i=c.value;i&&null!=i&&""!==i&&(s[e+"/"+i]=null)}}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}firebase.database().ref().update(s)}}},54:function(e,t){e.exports={getFormatCurrentDate:function(){return this.getFormatDate(new Date)},getFormatDate:function(e){var t=e.getMonth()+1,s=e.getDate(),r=e.getHours(),a=e.getMinutes(),o=e.getSeconds();return e.getFullYear()+"-"+(t<10?"0"+t:t)+"-"+(s<10?"0"+s:s)+" "+(r<10?"0"+r:r)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)},compareDate:function(e,t){return e-t}}}}]);